---
name: ralph-code-review
description: "Review code changes against PRD requirements and add fix stories to prd.json. Use when feature implementation is complete and needs review. Triggers on: review code, ralph code review, check implementation, validate against prd."
disable-model-invocation: true
---

# Ralph Code Review

Review all code changes on a feature branch against PRD requirements and project documentation. Identify issues and add them as new user stories to `.ralph/prd.json`.

---

## The Job

1. Gather reference documentation
2. Verify branch setup
3. Run automated checks
4. Identify code changes
5. Review changes against requirements
6. Present issues interactively
7. Add confirmed issues as stories to `.ralph/prd.json`

---

## Step 1: Gather Reference Files

<!-- TODO: Document reference file discovery (US-002) -->

---

## Step 2: Verify Branch

<!-- TODO: Document branch verification (US-003) -->

---

## Step 3: Run Automated Checks

<!-- TODO: Document automated checks execution (US-004) -->

---

## Step 4: Identify Changed Files

<!-- TODO: Document git diff for code review scope (US-005) -->

---

## Step 5: Review and Identify Issues

<!-- TODO: Document issue identification process (US-006) -->

---

## Step 6: Convert Issues to Stories

<!-- TODO: Document issue-to-story conversion format (US-007) -->

---

## Step 7: Interactive Review

<!-- TODO: Document interactive review workflow (US-008) -->

---

## Step 8: Update prd.json

<!-- TODO: Document prd.json modification rules (US-009) -->

---

## Step 9: Complete Review

<!-- TODO: Document review completion and re-invocation (US-010) -->

---

## Checklist

Before completing the review:

- [ ] Reference files gathered
- [ ] Branch verified
- [ ] Automated checks run
- [ ] Changed files identified
- [ ] Issues reviewed with user
- [ ] Stories added to `.ralph/prd.json`
